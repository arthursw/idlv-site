<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />

    <title>{{meta_title}}</title>
    <meta name="description" content="{{meta_description}}" />

    <meta name="HandheldFriendly" content="True" />
    <meta name="MobileOptimized" content="320" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no" />

    <link rel="stylesheet" type="text/css" href="{{asset "css/flexboxgrid.min.css"}}" />
    <link rel="stylesheet" type="text/css" href="{{asset "css/normalize.css"}}" />
    <link rel="stylesheet" type="text/css" href="{{asset "thirdparty/photoswipe/photoswipe.css"}}" />
    <link rel="stylesheet" type="text/css" href="{{asset "thirdparty/photoswipe/default-skin/default-skin.css"}}" />
    <link id="screen-styles" data-site-url="{{@blog.url}}" rel="stylesheet" type="text/css" href="{{asset "css/screen.css"}}" />
    <link rel="icon" type="image/x-icon" href="{{asset "assets/favicon.ico"}}" />

    {{#if pagination.next}}<link href="{{pageUrl pagination.next}}" rel="prefetch" />{{/if}}

    {{ghost_head}}

    <script type="text/javascript">

        var QueryString = function () {
          // This function is anonymous, is executed immediately and
          // the return value is assigned to QueryString!
          var query_string = {};
          var query = window.location.hash.substring(1);
          var vars = query.split("&");
          for (var i=0;i<vars.length;i++) {
            var pair = vars[i].split("=");
                // If first entry with this name
            if (typeof query_string[pair[0]] === "undefined") {
              query_string[pair[0]] = decodeURIComponent(pair[1]);
                // If second entry with this name
            } else if (typeof query_string[pair[0]] === "string") {
              var arr = [ query_string[pair[0]],decodeURIComponent(pair[1]) ];
              query_string[pair[0]] = arr;
                // If third or later entry with this name
            } else {
              query_string[pair[0]].push(decodeURIComponent(pair[1]));
            }
          }
          return query_string;
        }();

        let language = 'french'
        if(QueryString.lang == null) {
            language = localStorage.getItem('language')
        } else {
            language = QueryString.lang == 'fr' ? 'french' : 'english'
        }
        document.documentElement.className = "lang-" + (language == 'french' ? 'fr' : 'en') + " js"
        localStorage.setItem('language', language);
    </script>

</head>
<body class="{{body_class}}">

    <header id="site-head">
        {{#if @blog.logo}}<a id="blog-logo" href="{{@blog.url}}"><img class="bloglogo" src="{{@blog.logo}}" alt="IDLV-logo"></a>{{/if}}
        {{!-- <h1 class="blog-title"><a href="{{@blog.url}}">{{@blog.title}}</a></h1> --}}
        {{!-- {{> header-description}} --}}
        {{!> menu}}
        {{navigation}}
    </header>

    {{!-- <canvas class="processing" data-processing-sources="{{asset "js/generationtrails.pde"}}"></canvas> --}}

    {{!-- Reactivate generation: uncomment generationtrails.pde and processing.min.js --}}
    {{!-- <canvas class="processing" data-processing-sources="{{@blog.url}}/assets/js/generationtrails.pde"></canvas> --}}

    {{{body}}}

    {{> photoswipe}}

    <footer class="site-footer">
        <div class="inner">
            {{!> footer-description}}
            <section class="copyleft"><span><span class="copyleft">&copy;</span> {{date format="YYYY"}} <a href="/">{{@blog.description}}</a></span></section>
            {{!-- <section>Vapor theme by <a href="http://sethlilly.com/">Seth Lilly</a></section> --}}
            {{!-- <section class="poweredby">Proudly published with <a class="icon-ghost" href="http://ghost.org/"><span class="hidden">Ghost</span></a></section> --}}
        </div>
    </footer>

    {{ghost_foot}}

    <!-- Load jQuery if is not already loaded. -->
    <!-- After Ghost 0.7, on all new blogs jquery is not loaded by default. -->
    <script type="text/javascript">
        if (typeof jQuery == 'undefined') {
            document.write('<script type="text/javascript" src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-2.2.0.min.js"></'+'script>');
        }
    </script>

    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.6/moment.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.15.1/locale/fr.js"></script>

    {{!-- <script type="text/javascript" src="{{asset "thirdparty/processing.min.js"}}"></script> --}}

    <script type="text/javascript" src="{{asset "thirdparty/photoswipe/photoswipe.js"}}"></script>
    <script type="text/javascript" src="{{asset "thirdparty/photoswipe/photoswipe-ui-default.min.js"}}"></script>

    <script type="text/javascript" src="{{asset "js/index.js"}}"></script>
    <script type="text/javascript" src="{{asset "js/gallery.js"}}"></script>


</body>
</html>
